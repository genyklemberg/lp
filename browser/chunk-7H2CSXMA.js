import{a as Q,b as O}from"./chunk-B2VA5D6K.js";import{$ as l,A as S,C as x,D as I,E as n,Ea as $,H as m,L as c,O as s,R as g,S as D,T as N,U as r,V as a,W as y,X as E,Y as T,Z as u,_ as p,aa as R,ba as k,c as M,ca as F,da as q,ea as f,fa as v,ha as b,i as w,l as L,la as z,ma as A,r as C,u as P,v as _,va as V}from"./chunk-WXWTOEIB.js";var H=(e,t)=>["/",e,t];function Y(e,t){if(e&1&&(r(0,"p",3),p(1),a()),e&2){let o=u();n(),l(o.repo().description)}}var h=class e{repo=S.required();static \u0275fac=function(o){return new(o||e)};static \u0275cmp=m({type:e,selectors:[["app-repository-card"]],inputs:{repo:[1,"repo"]},decls:12,vars:12,consts:[[1,"repository-card",3,"routerLink"],[1,"repository-header"],[1,"avatar",3,"src","alt"],[1,"description"],[1,"stats"]],template:function(o,i){o&1&&(r(0,"a",0)(1,"div",1),y(2,"img",2),r(3,"h3"),p(4),a()(),c(5,Y,2,1,"p",3),r(6,"div",4)(7,"span"),p(8),a(),r(9,"span"),p(10),f(11,"date"),a()()()),o&2&&(s("routerLink",q(9,H,i.repo().owner.login,i.repo().name)),n(2),s("src",i.repo().owner.avatarUrl,I)("alt",i.repo().owner.login),n(2),l(i.repo().name),n(),g(i.repo().description?5:-1),n(3),R("\u2B50 ",i.repo().stargazerCount,""),n(2),R("\u{1F552} ",v(11,7,i.repo().updatedAt),""))},dependencies:[V,A],styles:["[_nghost-%COMP%]{padding:1rem;border:1px solid var(--gray-400);border-radius:8px;display:block;transition:transform .2s,box-shadow .2s}[_nghost-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 6px #0000001a}.repository-card[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:flex;flex-direction:column;height:100%;min-height:120px}.repository-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}.repository-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%}.repository-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem}.description[_ngcontent-%COMP%]{font-size:.9rem;color:var(--gray-700);margin:.5rem 0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;flex:1}.stats[_ngcontent-%COMP%]{display:flex;gap:1rem;font-size:.9rem;color:var(--gray-700);margin-top:auto;padding-top:.5rem}"],changeDetection:0})};var J=(e,t)=>t.id;function K(e,t){e&1&&(r(0,"div",1),p(1,"Loading repositories..."),a())}function W(e,t){if(e&1&&(r(0,"div",2),p(1),a()),e&2){let o=u();n(),l(o.error())}}function X(e,t){if(e&1&&y(0,"app-repository-card",4),e&2){let o=t.$implicit;s("repo",o)}}function Z(e,t){e&1&&(r(0,"div",5),p(1,"No repositories found"),a())}var B=class e{apiService=C($);queryRef=this.apiService.getRepositories();repositories$=null;loading=x(!0);error=x(null);repositoryPagination=C(O);hasNextPage=b(()=>this.repositoryPagination.pageInfo().hasNextPage);hasPreviousPage=b(()=>this.repositoryPagination.pageInfo().hasPreviousPage);ngOnInit(){this.loadInitial()}loadInitial(){this.repositories$=this.queryRef.valueChanges.pipe(L(({loading:t,error:o})=>{this.loading.set(t),this.error.set(o?.message??null),console.log("loading",t,"error",o)}),w(t=>(this.repositoryPagination.pageInfoUpdate(t.data.search),t.data.search.nodes)))}loadNext(){return M(this,null,function*(){this.loading.set(!0),this.error.set(null),this.repositoryPagination.getNextPage(this.queryRef)})}loadPrevious(){this.loading.set(!0),this.error.set(null),this.repositoryPagination.getPreviousPage(this.queryRef)}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=m({type:e,selectors:[["app-repository-list"]],features:[F([O])],decls:12,vars:7,consts:[[1,"repositories"],[1,"loading"],[1,"error"],[1,"repositories-grid"],[3,"repo"],[1,"empty"],[3,"next","previous","hasNextPage","hasPreviousPage","loading"]],template:function(o,i){if(o&1){let d=E();r(0,"div",0)(1,"h1"),p(2,"Public GitHub Repositories"),a(),c(3,K,2,0,"div",1)(4,W,2,1,"div",2),k(5),f(6,"async"),r(7,"div",3),D(8,X,1,1,"app-repository-card",4,J,!1,Z,2,0,"div",5),a()(),r(11,"app-pagination",6),T("next",function(){return P(d),_(i.loadNext())})("previous",function(){return P(d),_(i.loadPrevious())}),a()}if(o&2){n(3),g(i.loading()?3:i.error()?4:-1);let d=v(6,5,i.repositories$);n(5),N(d),n(3),s("hasNextPage",i.hasNextPage())("hasPreviousPage",i.hasPreviousPage())("loading",i.loading())}},dependencies:[Q,h,z],styles:[".repositories[_ngcontent-%COMP%]{padding:1rem}.repositories-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem;margin-top:1rem}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--gray-700)}.error[_ngcontent-%COMP%]{color:var(--hot-red)}"]})};export{B as RepositoryListComponent};
