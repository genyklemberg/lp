import{a as U,b as I}from"./chunk-B2VA5D6K.js";import{$ as l,A as E,C as u,D as w,E as s,Ea as A,H as _,L as C,O as f,P as T,Q as N,R as d,S as h,T as M,U as o,V as a,W as O,X as z,Y as k,Z as p,_ as r,a as v,aa as m,c as R,ca as q,ea as F,fa as L,ha as b,i as D,l as S,ma as V,r as g,sa as $,u as y,v as P}from"./chunk-WXWTOEIB.js";var x=class t{issue=E.required();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-issue-card"]],inputs:{issue:[1,"issue"]},decls:9,vars:7,consts:[[1,"issue-card"],[1,"issue-header"],[1,"issue-state"],[1,"issue-meta"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h4"),r(3),a(),o(4,"span",2),r(5),a()(),o(6,"p",3),r(7),F(8,"date"),a()()),e&2&&(s(3),l(i.issue().title),s(),N("closed",i.issue().state==="CLOSED"),s(),m(" ",i.issue().state," "),s(2),m(" on ",L(8,5,i.issue().createdAt)," "))},dependencies:[V],styles:[".issue-card[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;background:#fff;box-shadow:0 2px 4px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.issue-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.issue-card[_ngcontent-%COMP%]   .issue-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.issue-card[_ngcontent-%COMP%]   .issue-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:var(--gray-900)}.issue-card[_ngcontent-%COMP%]   .issue-state[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:1rem;font-size:.8rem;background:var(--bright-blue);color:#fff}.issue-card[_ngcontent-%COMP%]   .issue-state.closed[_ngcontent-%COMP%]{background:var(--french-violet)}.issue-card[_ngcontent-%COMP%]   .issue-meta[_ngcontent-%COMP%]{font-size:.9rem;color:var(--gray-700);margin:.5rem 0}.issue-card[_ngcontent-%COMP%]   .issue-labels[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.issue-card[_ngcontent-%COMP%]   .issue-labels[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:1rem;font-size:.8rem;color:#fff;font-weight:500}"],changeDetection:0})};var B=(t,n)=>n.name,Y=(t,n)=>n.id;function G(t,n){t&1&&(o(0,"div",1),r(1,"Loading repository details..."),a())}function H(t,n){if(t&1&&(o(0,"div",2),r(1),a()),t&2){let e=p();s(),l(e.error())}}function J(t,n){if(t&1&&(o(0,"p",6),r(1),a()),t&2){let e=p();s(),l(e.description)}}function K(t,n){if(t&1&&(o(0,"span",15),r(1),a()),t&2){let e=n.$implicit;T("--lang-color",e.color),s(),m(" ",e.name," ")}}function X(t,n){if(t&1&&(o(0,"div",11)(1,"h3"),r(2,"Languages"),a(),o(3,"div",13),h(4,K,2,3,"span",14,B),a()()),t&2){let e=p();s(4),M(e.languages)}}function Z(t,n){if(t&1&&O(0,"app-issue-card",17),t&2){let e=n.$implicit;f("issue",e)}}function ee(t,n){if(t&1){let e=z();o(0,"div",12)(1,"h3"),r(2,"Issues:"),a(),o(3,"div",16),h(4,Z,1,1,"app-issue-card",17,Y),a(),o(6,"app-pagination",18),k("next",function(){y(e);let c=p(2);return P(c.loadNext())})("previous",function(){y(e);let c=p(2);return P(c.loadPrevious())}),a()()}if(t&2){let e=p(),i=p();s(4),M(e.issues.nodes),s(2),f("hasNextPage",i.hasNextPage())("hasPreviousPage",i.hasPreviousPage())("loading",i.loading())}}function te(t,n){if(t&1&&(o(0,"header",3),O(1,"img",4),o(2,"h1"),r(3),a()(),o(4,"div",5),C(5,J,2,1,"p",6),o(6,"div",7)(7,"div",8)(8,"span",9),r(9,"Stars"),a(),o(10,"span",10),r(11),a()(),o(12,"div",8)(13,"span",9),r(14,"Issues"),a(),o(15,"span",10),r(16),a()(),o(17,"div",8)(18,"span",9),r(19,"Pull Requests"),a(),o(20,"span",10),r(21),a()(),o(22,"div",8)(23,"span",9),r(24,"Releases"),a(),o(25,"span",10),r(26),a()()(),C(27,X,6,0,"div",11)(28,ee,7,3,"div",12),a()),t&2){let e,i=n;s(),f("src",i.owner.avatarUrl,w)("alt",i.owner.login),s(2),l(i.name),s(2),d(i.description?5:-1),s(6),l(i.stargazerCount),s(5),l((e=i.issues.totalCount)!==null&&e!==void 0?e:0),s(5),l(i.pullRequests.totalCount),s(5),l(i.releases.totalCount),s(),d(i.languages.length?27:-1),s(),d(i.issues.nodes.length?28:-1)}}var j=class t{apiService=g(A);queryRef=null;route=g($);repository=u(null);loading=u(!0);error=u(null);repositoryIssuesPagination=g(I);hasNextPage=b(()=>this.repositoryIssuesPagination.pageInfo().hasNextPage);hasPreviousPage=b(()=>this.repositoryIssuesPagination.pageInfo().hasPreviousPage);ngOnInit(){this.route.params.subscribe(n=>{let e=n.owner,i=n.repositoryName;this.queryRef=this.apiService.getRepositoryDetails(e,i),this.initRepositoryDetails()})}initRepositoryDetails(){this.queryRef?.valueChanges.pipe(S(({loading:n,error:e})=>{this.loading.set(n),this.error.set(e?.message??null)}),D(n=>(this.repositoryIssuesPagination.pageInfoUpdate(n.data.repository.issues),n.data.repository))).subscribe({next:n=>{console.log(n),this.repository.update(e=>v(v({},e),n))}})}loadNext(){return R(this,null,function*(){this.loading.set(!0),this.error.set(null),this.repositoryIssuesPagination.getNextPage(this.queryRef)})}loadPrevious(){this.loading.set(!0),this.error.set(null),this.repositoryIssuesPagination.getPreviousPage(this.queryRef)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-repository-details"]],features:[q([I])],decls:4,vars:3,consts:[[1,"repository-details"],[1,"loading"],[1,"error"],[1,"repository-header"],[1,"avatar",3,"src","alt"],[1,"repository-info"],[1,"description"],[1,"stats"],[1,"stat"],[1,"label"],[1,"value"],[1,"languages"],[1,"issues-section"],[1,"language-list"],[1,"language",3,"--lang-color"],[1,"language"],[1,"issues-list"],[3,"issue"],[3,"next","previous","hasNextPage","hasPreviousPage","loading"]],template:function(e,i){if(e&1&&(o(0,"div",0),C(1,G,2,0,"div",1)(2,H,2,1,"div",2)(3,te,29,10),a()),e&2){let c;s(),d(i.loading()?1:-1),s(),d(i.error()?2:-1),s(),d((c=i.repository())?3:-1,c)}},dependencies:[U,x],styles:[".repository-details[_ngcontent-%COMP%]{padding:1rem;max-width:800px;margin:0 auto}.repository-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:2rem}.repository-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%}.repository-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.description[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--gray-700);margin-bottom:2rem}.stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:1rem;margin:2rem 0}.stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;background:#0000000d;text-align:center}.stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:.9rem;color:var(--gray-700)}.stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:500;margin-top:.25rem}.languages[_ngcontent-%COMP%]{margin:2rem 0}.languages[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem}.languages[_ngcontent-%COMP%]   .language-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.languages[_ngcontent-%COMP%]   .language[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:1rem;font-size:.9rem;background:#0000000d;border-left:3px solid var(--lang-color)}.issues-section[_ngcontent-%COMP%]{margin:2rem 0}.issues-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem}.issues-section[_ngcontent-%COMP%]   .issues-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--gray-700)}.error[_ngcontent-%COMP%]{color:var(--hot-red)}"]})};export{j as RepositoryDetailsComponent};
